# Evaluating and Improving ChatGPT for Unit Test Generation

ChatTester is a framework designed for generating test methods automatically based on large models such as ChatGPT.

![img.png](img.png)

# ChatTester Experiment Guide

## Environment Requirements
To run this experiment successfully, ensure that the following environment requirements are met:
- Python version >= 3.7
- JDK version = jdk1.8.0_131
 - Maven version >= 3.6.3 (installed and available on `PATH` as `mvn`)

## Environment variables and .env

This project reads configuration from environment variables. You can either export variables in your shell or place them in a repository-level `.env` file.

Create a `.env` file at the project root (same directory as `README.md`).

See the existing `.env.example` in the repository root for an example. Copy it to `.env` and fill in your values.

Notes:
- Keep all secrets from environment variables out of version control.

## Code Execution

Create a Python virtual environment (e.g.: venv).

Install the project dependencies inside the virtual environment:

```
pip install -r requirements.txt
```
To reproduce the effectiveness of ChatTester on the project, follow these steps:

1. Navigate to the `./ExperimentCode` directory.
2. Run the `InitialPhrase_Experiment.py` file.
   - Note: When running this `.py` file, make sure to set up your JDK environment and `open_key` (marked with TODO).
   - The functionality implemented by `InitialPhrase_Experiment` corresponds to the "Initial Test Generator" in the figure.

3.  Run the `ChatGptTester.py` file located in the `./ExperimentCode` directory.
    - This file implements the functionality of the "Iterative Test Refiner" in the figure.

4. After running the experiment, you can find the test methods generated by ChatTester for the given project in the `./ExperimentCode/IterateResultDeal` directory.

## Calculating Test Method Coverage
To calculate the coverage of the generated test methods in each project, follow these steps:

1. Navigate to the `CoverageCal` directory.
2. Run the `Mergy.py` file. This action will place the generated test methods in the respective project directories.
3. Then, run the `jacoco.py` script located in the `./script` directory. This script utilizes Jacoco to calculate the coverage of the generated test methods in each project.

# Additional Experiments Data
Additional experimental data related to this paper can be found at the following link: [ChatTESTER.git](https://github.com/yz-qiang/ChatTESTER/tree/master)


# Citation
```
@misc{yuan2023manual,
      title={No More Manual Tests? Evaluating and Improving ChatGPT for Unit Test Generation}, 
      author={Zhiqiang Yuan and Yiling Lou and Mingwei Liu and Shiji Ding and Kaixin Wang and Yixuan Chen and Xin Peng},
      year={2023},
      eprint={2305.04207},
      archivePrefix={arXiv},
      primaryClass={cs.SE}
}
```